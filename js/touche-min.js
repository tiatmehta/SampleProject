!function(){var e,t,n,o,i,r,c,a=!1,s=0;t=function(t,n){var o,i,r;switch(o=e||n.target,i=document.createEvent("MouseEvent"),i.initMouseEvent(t,!0,!0,window,n.detail,n.screenX,n.screenY,n.clientX,n.clientY,n.ctrlKey,n.shiftKey,n.altKey,n.metaKey,n.button,n.relatedTarget),i.emulatedByTouche=!0,r=[{identifier:(new Date).getTime(),pageX:n.pageX,pageY:n.pageY,clientX:n.clientX,clientY:n.clientY,target:o,screenX:n.screenX,screenY:n.screenY}],t){case"touchstart":e=o,i.touches=i.changedTouches=i.targetTouches=r;break;case"touchmove":i.touches=i.changedTouches=i.targetTouches=r;break;case"touchend":e=null,i.changedTouches=r,i.touches=i.targetTouches=[]}n.target.dispatchEvent(i)},r=function(){return(new Date).getTime()-s<1e3},obviouslyFake=function(e){return!e.pageX&&!e.pageY&&!e.clientX&&!e.clientY&&navigator.userAgent.match(/Android/i)},n=function(e){r()||obviouslyFake(e)||(a=!0,t("touchstart",e))},o=function(e){r()||obviouslyFake(e)||a&&t("touchmove",e)},i=function(e){r()||obviouslyFake(e)||(a=!1,t("touchend",e))},c=function(e){e.emulatedByTouche||(s=(new Date).getTime())},document.addEventListener("mousedown",n,!1),document.addEventListener("mousemove",o,!1),document.addEventListener("mouseup",i,!1),document.addEventListener("touchstart",c,!1),document.addEventListener("touchend",c,!1)}(),function(){function e(){function e(e,t,n,o,i,r,c,a){this.identifier=e,this.target=t,this.screenX=n,this.screenY=o,this.clientX=i,this.clientY=r,this.pageX=c,this.pageY=a}function t(e){var t;for(t=0;t<c.length;t+=1)if(c[t].identifier===e)return c[t]}function n(e){var t;for(t=0;t<c.length;t+=1)if(c[t].identifier===e.identifier)return void(c[t]=e);c.push(e)}function o(e){var t;for(t=0;t<c.length;t+=1)c[t].identifier===e&&c.splice(t,1)}function i(){for(;c.length>0;)c.pop()}function r(e,t){var n;for(n=0;n<c.length;n+=1)if(c[n].screenX===e&&c[n].screenY===t)return!0;return!1}var c=[];this.touchList=c,this.Touch=e,this.getTouch=t,this.addUpdateTouch=n,this.removeTouch=o,this.clearTouches=i,this.containsTouchAt=r}function t(e,t){return e.screenX===t.screenX&&e.screenY===t.screenY}function n(e,t){var n;return t=t||{bubbles:!1,cancelable:!1,detail:void 0},n=document.createEvent("CustomEvent"),n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}function o(e){for(;e&&!e.handJobjs_forcePreventDefault;)e=e.parentNode;return!!e||window.handJobjs_forcePreventDefault}function i(e,o,i,r,c){function a(e,t){var n,o;for(L.clearTouches(),n=0;n<t.length;n++)o=t[n],o.target.isSameNode(e)&&L.addUpdateTouch(o)}function s(e){var o,i,r;if(w("touch!"),"pointerdown"===e.type)o="touchstart";else{if("pointermove"!==e.type)throw new Error("touchHandler received invalid event type: "+o+". Valid event types are pointerdown and pointermove");o="touchmove"}return w(o),i=new T.Touch(e.pointerId,"pointerdown"===e.type?e.target:v,e.screenX,e.screenY,e.clientX,e.clientY,e.pageX,e.pageY),e.hwTimestamp>y&&!function(){var e,n,o,i,r;for(n=b.touchList,e=0;e<n.length;e+=1)o=n[e],r=o.identifier,i=T.getTouch(r),(!i||t(i,o))&&b.removeTouch(r)}(),w("generating touch cloned"),T.addUpdateTouch(i),b.addUpdateTouch(i),a(i.target,T.touchList),e.type=o,r=new n(o,{bubbles:!0,cancelable:!0}),r.touches=T.touchList,r.changedTouches=b.touchList,r.targetTouches=L.touchList,r.type=o,r}function d(e){var t,o,i;return w("touchchanged!"),e.changedTouches=[],e.changedTouches.length=1,e.changedTouches[0]=e,e.changedTouches[0].identifier=e.pointerId,"pointerup"===e.type?t="touchend":"pointercancel"===e.type?t="touchcancel":"pointerleave"===e.type&&(t="touchleave"),o=new T.Touch(e.pointerId,v,e.screenX,e.screenY,e.clientX,e.clientY,e.pageX,e.pageY),e.hwTimestamp>y&&b.clearTouches(),T.removeTouch(o.identifier),b.addUpdateTouch(o),a(o.target,T.touchList),e.type=t,i=new n(t,{bubbles:!0,cancelable:!0}),i.touches=T.touchList,i.changedTouches=b.touchList,i.targetTouches=L.touchList,i.type=t,i}var u,h,v;"pointerdown"!==e.type&&(h=T.getTouch(e.pointerId),v=h.target,e.target=v),u="pointerdown"===e.type||"pointermove"===e.type?s(e):d(e),u.preventDefault=function(){void 0!==e.preventDefault&&e.preventDefault()},w("dispatching!"),e.target.dispatchEvent(u),y=event.hwTimestamp}function r(e,t,n,o,r,c){i(t,e,r,n,c)}function c(e,t,n,o){if(w("registerOrUnregisterEvent"),void 0===e.__handJobjsRegisteredEvents&&(e.__handJobjsRegisteredEvents=[]),o){if(void 0!==e.__handJobjsRegisteredEvents[t])return void(e.__handJobjsRegisteredEvents[t]+=1);e.__handJobjsRegisteredEvents[t]=1,w("adding event "+t),e.addEventListener(t,n,!1)}else{if(-1!==e.__handJobjsRegisteredEvents.indexOf(t)&&(e.__handJobjsRegisteredEvents[t]-=1,0!==e.__handJobjsRegisteredEvents[t]))return;w("removing event"),e.removeEventListener(t,n),e.__handJobjsRegisteredEvents[t]=0}}function a(e,t,n){function o(e){return e}var r,a;if(w("setTouchAware "+n+" "+t),e.__handJobjsGlobalRegisteredEvents||(e.__handJobjsGlobalRegisteredEvents=[]),n){if(void 0!==e.__handJobjsGlobalRegisteredEvents[t])return void(e.__handJobjsGlobalRegisteredEvents[t]+=1);e.__handJobjsGlobalRegisteredEvents[t]=1,w(e.__handJobjsGlobalRegisteredEvents[t])}else void 0!==e.__handJobjsGlobalRegisteredEvents[t]&&(e.__handJobjsGlobalRegisteredEvents[t]-=1,e.__handJobjsGlobalRegisteredEvents[t]<0&&(e.__handJobjsGlobalRegisteredEvents[t]=0));r=i,a=o(t),void 0!==e["on"+a.toLowerCase()]&&c(e,a,function(e){r(e,t)},n)}function s(e){function t(e,t,o){w("customAddEventListener"),w(e),-1!==H.indexOf(e)&&(w("setting touch aware..."),a(this,e,!0)),n.call(this,e,t,o)}var n=e.prototype?e.prototype.addEventListener:e.addEventListener;w("intercepting add event listener!"),w(e),e.prototype?e.prototype.addEventListener=t:e.addEventListener=t}function d(e,t){w("handle other event"),e.preventManipulation&&e.preventManipulation(),i(touchPoint,t)}function u(e,t){if(void 0===e.ontouchdown&&void 0!==e.ontouchstart)switch(t.toLowerCase()){case"touchstart":e.removeEventListener("pointerdown",function(e){d(e,t)});break;case"touchmove":e.removeEventListener("pointermove",function(e){d(e,t)});break;case"touchend":e.removeEventListener("pointerup",function(e){d(e,t)});break;case"touchcancel":e.removeEventListener("pointercancel",function(e){d(e,t)})}}function h(e){function t(e,t,o){-1!==H.indexOf(e)&&u(this,e),n.call(this,e,t,o)}var n=e.prototype?e.prototype.removeEventListener:e.removeEventListener;e.prototype?e.prototype.removeEventListener=t:e.removeEventListener=t}function v(e,t){return e.__handJobjsGlobalRegisteredEvents&&e.__handJobjsGlobalRegisteredEvents[t]}function l(e,t){for(w("findEventRegisteredNode");e&&!v(e,t);)e=e.parentNode;return e?e:v(window,t)?window:void 0}function p(e,t,n,o,i,c){w("generateTouchEventProxyIfRegistered"),l(n,e)&&r(e,t,n,o,i,c)}function f(e){var t=[];if(e)for(t.unshift(e);e.parentNode;)t.unshift(e.parentNode),e=e.parentNode;return t}function g(e,t){for(var n=f(e),o=f(t),i=null;n.length>0&&n[0]===o.shift();)i=n.shift();return i}function m(e,t,n){w("dispatchPointerEnter");for(var o=g(e,t),i=e,r=[];i&&i!==o;)v(i,"touchenter")&&r.push(i),i=i.parentNode;for(;r.length>0;)n(r.pop())}function E(e,t,n){w("dispatchPointerLeave");for(var o=g(e,t),i=e;i&&i!==o;)v(i,"touchleave")&&n(i),i=i.parentNode}function w(e){_&&console.log(e.toString())}var T,b,L,y=0,_=!1,M=navigator.userAgent,H=["touchstart","touchmove","touchend","touchcancel","touchleave"],j={};n.prototype=window.Event.prototype,"object"!=typeof window.ontouchstart&&(M.match(/iPad/i)||M.match(/iPhone/i)||M.match(/iPod/i)||M.match(/Android/i)||M.match(/MSIE/i)&&!M.match(/Touch/i)||(T=new e,b=new e,L=new e,window.CustomEvent=n,s(window),s(window.HTMLElement||window.Element),s(document),s(HTMLBodyElement),s(HTMLDivElement),s(HTMLImageElement),s(HTMLUListElement),s(HTMLAnchorElement),s(HTMLLIElement),s(HTMLTableElement),window.HTMLSpanElement&&s(HTMLSpanElement),window.HTMLCanvasElement&&s(HTMLCanvasElement),window.SVGElement&&s(SVGElement),h(window),h(window.HTMLElement||window.Element),h(document),h(HTMLBodyElement),h(HTMLDivElement),h(HTMLImageElement),h(HTMLUListElement),h(HTMLAnchorElement),h(HTMLLIElement),h(HTMLTableElement),window.HTMLSpanElement&&h(HTMLSpanElement),window.HTMLCanvasElement&&h(HTMLCanvasElement),window.SVGElement&&h(SVGElement),function(){function e(e){return"mouse"===e.pointerType?!0:"pointerdown"===e.type&&0===e.x&&0===e.y?!0:"pen"===e.pointerType&&0===e.pressure&&"pointermove"===e.type?!0:!1}window.addEventListener("pointerdown",function(t){w("pointerdownfired");var n=t;e(t)||(j[n.identifier]=n.target,p("touchenter",n,n.target,t,!0),m(n.target,null,function(e){r("touchenter",n,e,t,!1)}),p("touchstart",n,n.target,t,!0))}),window.addEventListener("pointerup",function(t){var n=t,o=j[n.identifier];w("pointer up fired"),e(t)||(p("touchend",n,o,t,!0),p("touchleave",n,o,t,!0),E(o,null,function(e){r("touchleave",n,e,t,!1)}))}),window.addEventListener("pointermove",function(t){var n=t,i=j[n.identifier];w("pointer move fired"),e(t)||(w("x: "+t.screenX+", y: "+t.screenY),T.containsTouchAt(t.screenX,t.screenY)||(i&&o(i)===!0&&t.preventDefault(),p("touchmove",n,i,t,!0)))})}()))}();